<%- include ('../layouts/adminheader') %>

<!-- <h2 class="page-title">Add a page</h2>
<a href="/admin/pages" class="btn btn-primary">Back to all pages</a>
<br><br> -->


<section class="page-section" id="contact">
	<div class="container px-4 px-lg-5">
		<div class="row gx-4 px-lg-5 mb-5 justify-content-center text-center">
			<div class="col-lg-8 text-center">
				
				<h2>Categories</h2>
				<%- messages('messages', locals) %>
				<hr class="divider">
				<p class="mb-4">Ready to start your next project with us? Send us a messages and we will get back to you as soon as possible!</p>
			
			</div>
			<div action="" class="form-contact col-lg-6">
				<a href="/admin/categories/add-category" class="btn btn-primary btn-xl my-4">Add a new category</a>
			</div>
			<table class="table table-striped">
					<thead>
						<tr class="home">
							<th>Category</th>
							<th>Edit</th>
							<th>Delete</th>
						</tr>
					</thead> 
					<tbody>
							<% categories.forEach(function(cat){ %>
								
								<tr>
									<td><%= cat.title %></td>
									<td><a href="/admin/categories/edit-category/<%= cat._id %>">Edit</a></td>
									
									<td><a class="confirmDeletion" href="/admin/categories/delete-category/<%= cat._id %>">Delete</a></td>
											
									
								</tr>

							<%	}); %>
					</tbody>
			</table>
			
		</div>

		<div class="row gx-4 px-lg-5 justify-content-center text-center">
			<div class="col-lg-4 text-center phone-contact">
				<i class="bi bi-phone"></i>
				<p class="mb-4">+1 (555) 123-4567</p>
			</div>

		</div>
	</div>
</section>

<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>
<script>
	$('tbody').sortable({

		items: "tr:not('.home')",
		placeholder: "ui-state-hightlight",
		update: function(){
			var ids = $('tbody').sortable("serialize");
			var url = "/admin/pages/reorder-categories";

			$.post(url,ids);
		}

	});
</script>
<%- include ('../layouts/adminfooter') %>